(this.webpackJsonpmy_admin=this.webpackJsonpmy_admin||[]).push([[0],{1042:function(e,t,n){},1357:function(e,t,n){},1358:function(e,t,n){"use strict";n.r(t);var a=n(8),r=n(0),s=n.n(r),i=n(71),c=n.n(i),o=(n(719),n(53)),l=n(54),u=n(56),d=n(55),h=n(176),p=n(99),j=(n(153),n(70)),b=(n(273),n(112)),f=(n(204),n(96)),m=n(36),O=n.n(m),x=(n(185),n(77)),g=n(75),y=n(1366),v=n(1367),k=n(252),w=n(451),S=n.n(w);function C(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET";return new Promise((function(a,r){var s;(s="GET"===n?S.a.get(e,{params:t}):S.a.post(e,t)).then((function(e){a(e.data)})),s.catch((function(e){x.b.error("\u7f51\u7edc\u7e41\u5fd9"+e)}))}))}var I=function(e,t){return C("/login",{username:e,password:t},"POST")},L=function(e){return C(e)},N=function(e){return C("/manage/category/list",{parentId:e})},A=function(e){return C("/manage/category/update",e,"POST")},_=function(e){return C("/manage/category/add",e,"POST")},T=function(e,t){return C("/manage/product/list",{pageNum:e,pageSize:t})},F=function(e,t,n,a){return C("/manage/product/search",Object(k.a)({pageNum:e,pageSize:t},a,n))},R=function(e,t){return C("/manage/product/updateStatus",{productId:e,status:t},"POST")},P=function(e){return C("/manage/category/info",{categoryId:e})},E=function(e,t){return C("/manage/product/"+t,e,"POST")},D=function(e){return C("/manage/role/add",e,"POST")},V=function(e){return C("/manage/user/"+(e._id?"update":"add"),e,"POST")},M=n(396),U=n.n(M),q="user_key",H=function(e){return U.a.set(q,e)},z=function(){return U.a.get(q)||{}},K=function(){U.a.remove(q)},B=n.p+"static/media/logo.f6487143.png",J=(n(772),function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).validatorPwd=function(e,t){var n=t||"";return 0===n.length?Promise.reject("\u5bc6\u7801\u4e0d\u80fd\u4e3a\u7a7a\uff01"):n.length<4||n.length>12?Promise.reject("\u5bc6\u7801\u957f\u5ea6\u4e3a4-12\u4f4d\uff01"):/^[0-9a-zA-Z_.]+$/.test(n)?Promise.resolve():Promise.reject("\u7528\u6237\u540d\u4e3a\u82f1\u6587\u3001\u6570\u5b57\u6216\u4e0b\u5212\u7ebf\u7ec4\u6210!")},e.onFinish=function(){var t=Object(g.a)(O.a.mark((function t(n){var a,r,s;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=n.username,r=n.password,t.next=3,I(a,r);case 3:0===(s=t.sent).status?(H(s.data),e.props.history.replace("/"),x.b.success("\u767b\u5f55\u6210\u529f")):(x.b.error(s.msg),console.log(s));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(l.a)(n,[{key:"render",value:function(){var e=z();return e&&e._id?Object(a.jsx)(p.a,{to:"/"}):Object(a.jsxs)("div",{className:"login",children:[Object(a.jsxs)("header",{className:"login-header",children:[Object(a.jsx)("img",{alt:"logo",src:B}),Object(a.jsx)("h1",{children:"React\u9879\u76ee:\u540e\u53f0\u7ba1\u7406\u7cfb\u7edf"})]}),Object(a.jsxs)("section",{className:"login-content",children:[Object(a.jsx)("h2",{className:"content-title",children:"\u7528\u6237\u767b\u5f55"}),Object(a.jsxs)(b.a,{style:{marginTop:"20px"},onFinish:this.onFinish,name:"login",children:[Object(a.jsx)(b.a.Item,{name:"username",rules:[{required:!0,message:"\u7528\u6237\u540d\u4e0d\u80fd\u4e3a\u7a7a!"},{max:12,min:4,message:"\u7528\u6237\u540d\u4f7f\u7528\u4e3a4-12\u4f4d!"},{pattern:/^[0-9a-zA-Z_.]+$/,message:"\u7528\u6237\u540d\u4e3a\u82f1\u6587\u3001\u6570\u5b57\u6216\u4e0b\u5212\u7ebf\u7ec4\u6210!"}],initialValue:"admin",children:Object(a.jsx)(f.a,{prefix:Object(a.jsx)(y.a,{className:"site-form-item-icon"}),placeholder:"Username"})}),Object(a.jsx)(b.a.Item,{name:"password",rules:[{validator:this.validatorPwd}],children:Object(a.jsx)(f.a.Password,{prefix:Object(a.jsx)(v.a,{className:"site-form-item-icon"}),placeholder:"Password"})}),Object(a.jsx)(b.a.Item,{style:{marginTop:"30px"},children:Object(a.jsx)(j.a,{type:"primary",htmlType:"submit",style:{width:"100%"},children:"\u767b\u5f55"})})]})]})]})}}]),n}(r.Component)),G=(n(853),n(272)),W=(n(276),n(133)),X=n(1377),Z=n(1368),$=n(1369),Q=n(1370),Y=n(1371),ee=n(1372),te=n(1373),ne=n(1374),ae=n(1375),re=n(1376),se=[{title:"\u9996\u9875",key:"/home",icon:Object(a.jsx)(Z.a,{})},{title:"\u5546\u54c1",key:"/products",icon:Object(a.jsx)($.a,{}),children:[{title:"\u54c1\u7c7b\u7ba1\u7406",key:"/category",icon:Object(a.jsx)(Q.a,{})},{title:"\u5546\u54c1\u7ba1\u7406",key:"/product",icon:Object(a.jsx)(Y.a,{})}]},{title:"\u7528\u6237\u7ba1\u7406",key:"/user",icon:Object(a.jsx)(y.a,{})},{title:"\u89d2\u8272\u7ba1\u7406",key:"/role",icon:Object(a.jsx)(ee.a,{})},{title:"\u56fe\u5f62\u56fe\u8868",key:"/charts",icon:Object(a.jsx)(te.a,{}),children:[{title:"\u67f1\u5f62\u56fe",key:"/charts/bar",icon:Object(a.jsx)(ne.a,{})},{title:"\u6298\u7ebf\u56fe",key:"/charts/line",icon:Object(a.jsx)(ae.a,{})},{title:"\u997c\u56fe",key:"/charts/pie",icon:Object(a.jsx)(re.a,{})}]},{title:"\u8ba2\u5355\u7ba1\u7406",key:"/order",icon:Object(a.jsx)(ee.a,{})}];function ie(e){var t;return(t=e?new Date(e):new Date).getFullYear()+"/"+(t.getMonth()+1)+"/"+t.getDate()+" "+t.getHours()+":"+t.getMinutes()+":"+t.getSeconds()}var ce=n(149);n(856);function oe(e){return Object(a.jsx)("button",Object(ce.a)(Object(ce.a)({className:"button_a"},e),{},{children:e.children}))}n(857);var le=W.a.confirm,ue=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).state={weather:{},time:""},e.getMenuList=function(t){return t.forEach((function(t){var n=e.props.location.pathname;t.children&&e.getMenuList(t.children),-1!==n.indexOf("/product")&&(n="/product"),n===t.key&&(e.title=t.title)}))},e.getTime=function(){if(!e.timeId){var t=ie();e.setState({time:t})}e.timeId=setInterval((function(){var t=ie();e.setState({time:t})}),1e3)},e.getWeather=Object(g.a)(O.a.mark((function t(){var n;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return"http://wthrcdn.etouch.cn/weather_mini?city=\u6000\u5316",t.next=3,L("http://wthrcdn.etouch.cn/weather_mini?city=\u6000\u5316");case 3:n=t.sent,e.setState({weather:n.data.forecast[0]});case 5:case"end":return t.stop()}}),t)}))),e.logOUt=function(){console.log(123),le({title:"\u6e29\u99a8\u63d0\u793a",icon:Object(a.jsx)(X.a,{}),content:"\u4f60\u786e\u5b9a\u8981\u9000\u51fa\u767b\u5f55\u5417?",onOk:function(){K()}})},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.getWeather(),this.getTime()}},{key:"componentWillUnmount",value:function(){clearInterval(this.timeId)}},{key:"render",value:function(){var e=z();return this.getMenuList(se),e&&e._id?Object(a.jsxs)("div",{className:"home-header",children:[Object(a.jsxs)("div",{className:"home-header-top",children:[Object(a.jsxs)("span",{children:["\u6b22\u8fce,",e.username]}),Object(a.jsx)(oe,{onClick:this.logOUt,children:"\u9000\u51fa"})]}),Object(a.jsxs)("div",{className:"home-header-bottom",children:[Object(a.jsx)("div",{className:"header-bottom-left",children:this.title}),Object(a.jsxs)("div",{className:"header-bottom-right",children:[Object(a.jsx)("span",{children:this.state.time}),Object(a.jsx)("img",{src:"",alt:""}),Object(a.jsx)("span",{children:this.state.weather.type||"\u6674\u5929"})]})]})]}):Object(a.jsx)(p.a,{to:"/login"})}}]),n}(r.Component),de=Object(p.g)(ue),he=(n(868),n(151)),pe=(n(870),he.a.SubMenu),je=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var r;Object(o.a)(this,n),(r=t.call(this,e)).getMenuList=function(e){var t=r.props.location.pathname,n=r.state.user.role.menus;return e.map((function(e){var s=n.find((function(t){return t===e.key}));if(e.children){var i=n.find((function(t){return-1!==t.indexOf(e.key)}));return-1!==t.indexOf("/product")&&(t="/product"),e.children.find((function(e){return t===e.key}))&&(r.path=e.key),i||"admin"===r.state.user.username?Object(a.jsx)(pe,{icon:e.icon,title:e.title,children:r.getMenuList(e.children)},e.key):null}return"admin"===r.state.user.username||"/home"===e.key||s?Object(a.jsx)(he.a.Item,{icon:e.icon,children:Object(a.jsx)(h.b,{to:e.key,children:e.title})},e.key):null}))};var s=z();return r.state={user:s},r.getMenuList(se),r}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props.location.pathname;return-1!==e.indexOf("/product")&&(e="/product"),Object(a.jsxs)("div",{className:"left-nav",children:[Object(a.jsxs)("div",{className:"left-nav-title",children:[Object(a.jsx)("img",{src:B,alt:"logo"}),Object(a.jsx)("h1",{children:"\u7535\u5546\u540e\u53f0\u7ba1\u7406"})]}),Object(a.jsx)(he.a,{mode:"inline",theme:"dark",defaultOpenKeys:[this.path],selectedKeys:[e],children:this.getMenuList(se)})]})}}]),n}(r.Component),be=Object(p.g)(je),fe=(n(481),n(201)),me=(n(482),n(128)),Oe=(n(1359),n(702)),xe=(n(484),n(271)),ge=n(397),ye=(n(889),xe.a.TabPane),ve=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).getDateBar=function(){return[{action:"\u6d4f\u89c8\u7f51\u7ad9",pv:5e4},{action:"\u653e\u5165\u8d2d\u7269\u8f66",pv:35e3},{action:"\u751f\u6210\u8ba2\u5355",pv:25e3},{action:"\u652f\u4ed8\u8ba2\u5355",pv:15e3},{action:"\u5b8c\u6210\u4ea4\u6613",pv:8500}]},e.getDateColumn=function(){return[{type:"\u5bb6\u5177\u5bb6\u7535",sales:38},{type:"\u7cae\u6cb9\u526f\u98df",sales:52},{type:"\u751f\u9c9c\u6c34\u679c",sales:61},{type:"\u7f8e\u5bb9\u6d17\u62a4",sales:145},{type:"\u6bcd\u5a74\u7528\u54c1",sales:48},{type:"\u8fdb\u53e3\u98df\u54c1",sales:38},{type:"\u98df\u54c1\u996e\u6599",sales:38},{type:"\u5bb6\u5ead\u6e05\u6d01",sales:38}]},e.getDatePie=function(){return[{type:"\u5206\u7c7b\u4e00",value:27},{type:"\u5206\u7c7b\u4e8c",value:25},{type:"\u5206\u7c7b\u4e09",value:18},{type:"\u5206\u7c7b\u56db",value:15},{type:"\u5206\u7c7b\u4e94",value:10},{type:"\u5176\u4ed6",value:5}]},e.handleChange=function(e){console.log(e)},e}return Object(l.a)(n,[{key:"render",value:function(){var e={data:this.getDateColumn(),xField:"type",yField:"sales",label:{position:"middle",style:{fill:"#FFFFFF",opacity:.6}},meta:{type:{alias:"\u7c7b\u522b"},sales:{alias:"\u9500\u552e\u989d"}}},t={appendPadding:10,data:this.getDatePie(),angleField:"value",colorField:"type",radius:.9,label:{type:"inner",offset:"-30%",content:function(e){var t=e.percent;return"".concat(100*t,"%")},style:{fontSize:16,textAlign:"center"}},interactions:[{type:"element-active"}]};return Object(a.jsxs)("div",{className:"home",children:[Object(a.jsxs)(fe.a,{children:[Object(a.jsx)(me.a,{span:8,children:Object(a.jsx)("div",{className:"site-calendar-demo-card",children:Object(a.jsx)(Oe.a,{fullscreen:!1})})}),Object(a.jsx)(me.a,{span:16,children:Object(a.jsx)(ge.a,{data:this.getDateBar(),xField:"pv",yField:"action"})})]}),Object(a.jsxs)(xe.a,{defaultActiveKey:"1",onChange:this.handleChange,children:[Object(a.jsxs)(ye,{tab:"Tab 1",children:[Object(a.jsx)("div",{style:{height:300},children:Object(a.jsx)(ge.b,Object(ce.a)({},e))}),"123"]},"1"),Object(a.jsx)(ye,{tab:"Tab 2",children:Object(a.jsx)("div",{style:{height:300},children:Object(a.jsx)(ge.c,Object(ce.a)({},t))})},"2")]})]})}}]),n}(r.Component),ke=(n(171),n(109)),we=(n(349),n(194)),Se=(n(277),n(113)),Ce=b.a.Item,Ie=Se.a.Option,Le=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).formRef=s.a.createRef(),e.state={dataSource:[],subdataSource:[],parentId:0,isShowCategory:!1,isShowAdd:!1,data:{}},e.getCategory=Object(g.a)(O.a.mark((function t(){var n,a;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.state.parentId,t.next=3,N(n);case 3:(a=t.sent).data.forEach((function(e){e.key=e._id})),0===a.status?0===n?e.setState({dataSource:a.data}):e.setState({subdataSource:a.data}):x.b.error("\u5217\u8868\u83b7\u53d6\u5931\u8d25");case 6:case"end":return t.stop()}}),t)}))),e.getSubList=function(t){var n=t._id;e.setState({parentId:n},(function(){e.getCategory()}))},e.getList=function(){e.setState({parentId:0},(function(){e.getCategory()}))},e.update=function(t){e.setState({isShowCategory:!0,data:t},(function(){e.formRef.current.setFieldsValue({categoryName:e.state.data.name})}))},e.categoryHandleOk=function(){e.formRef.current.submit()},e.categoryHandleCancel=function(){e.setState({isShowCategory:!1,data:{}},(function(){e.formRef.current.resetFields()}))},e.categoryFinish=function(){var t=Object(g.a)(O.a.mark((function t(n){var a,r;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.state.data._id,r=n.categoryName,t.next=4,A({categoryId:a,categoryName:r});case 4:0===t.sent.status?e.setState({isShowCategory:!1,data:{}},(function(){e.formRef.current.resetFields()})):x.b.error("\u7f51\u7edc\u7e41\u5fd9\uff0c\u7a0d\u540e\u518d\u8bd5\uff01"),e.getCategory();case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.add=function(){e.setState({isShowAdd:!0},(function(){e.formRef.current.setFieldsValue({parentId:e.state.parentId+""})}))},e.addHandleOk=function(){e.formRef.current.submit()},e.addHandleCancel=function(){e.setState({isShowAdd:!1},(function(){e.formRef.current.resetFields()}))},e.AddFinish=function(){var t=Object(g.a)(O.a.mark((function t(n){var a,r;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=n.parentId,r=n.categoryName,t.next=3,_({parentId:a,categoryName:r});case 3:0===t.sent.status?(e.addHandleCancel(),e.getCategory()):x.b.error("\u6dfb\u52a0\u5931\u8d25\uff0c\u7a0d\u540e\u518d\u8bd5");case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){!function(e,t){var n}(this.AddFinish,1e3),this.getCategory()}},{key:"render",value:function(){var e=this,t=this.state,n=t.dataSource,r=t.subdataSource,s=t.parentId,i=t.isShowAdd,c=t.isShowCategory,o=[{title:"\u5206\u7c7b\u540d\u79f0",dataIndex:"name",width:"60%"},{title:"\u64cd\u4f5c",render:function(t){return Object(a.jsxs)("span",{children:[Object(a.jsx)(oe,{onClick:function(){return e.update(t)},children:"\u4fee\u6539\u5206\u7c7b"}),0===s?Object(a.jsx)(oe,{onClick:function(){return e.getSubList(t)},children:"\u67e5\u770b\u4e8c\u7ea7\u5206\u7c7b"}):null]})}}];return Object(a.jsxs)(ke.a,{className:"category_card",title:0===s?"\u4e00\u7ea7\u5206\u7c7b":Object(a.jsxs)("span",{children:[Object(a.jsx)(oe,{onClick:this.getList,children:"\u4e00\u7ea7\u5206\u7c7b"}),Object(a.jsx)("span",{children:">"}),Object(a.jsx)("span",{children:"\u4e8c\u7ea7\u5206\u7c7b"})]}),extra:Object(a.jsx)(oe,{onClick:this.add,children:"+ \u6dfb\u52a0"}),children:[Object(a.jsx)(we.a,{dataSource:0===s?n:r,columns:o,pagination:{defaultPageSize:5,showQuickJumper:!0,pageSize:3}},"1"),Object(a.jsx)(W.a,{title:"\u4fee\u6539\u5206\u7c7b",visible:c,onOk:this.categoryHandleOk,onCancel:this.categoryHandleCancel,children:Object(a.jsx)(b.a,{ref:this.formRef,onFinish:this.categoryFinish,children:Object(a.jsx)(Ce,{label:"\u5206\u7c7b\u540d\u79f0",name:"categoryName",initialValue:this.state.data.name,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5206\u7c7b\u540d\u79f0\uff01"}],children:Object(a.jsx)(f.a,{})})})}),Object(a.jsx)(W.a,{title:"\u6dfb\u52a0\u5206\u7c7b",visible:i,onOk:this.addHandleOk,onCancel:this.addHandleCancel,children:Object(a.jsxs)(b.a,{ref:this.formRef,onFinish:this.AddFinish,children:[Object(a.jsx)(Ce,{name:"parentId",initialValue:s+"",children:Object(a.jsxs)(Se.a,{style:{width:"100%"},children:[",",Object(a.jsx)(Ie,{value:"0",children:"\u4e00\u7ea7\u5206\u7c7b"}),n.map((function(e){return Object(a.jsx)(Ie,{value:e._id,children:e.name},e._id)}))]})}),Object(a.jsx)(Ce,{style:{marginTop:30},name:"categoryName",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5206\u7c7b\u540d\u79f0\uff01"}],children:Object(a.jsx)(f.a,{placeholder:"\u8f93\u5165\u4f60\u7684\u5206\u7c7b\u540d\u79f0"})})]})})]})}}]),n}(r.Component),Ne=Se.a.Option,Ae=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={productList:[],pageNum:1,total:0,search:"",productType:"productName"},e.getProductList=Object(g.a)(O.a.mark((function t(){var n,a,r,s,i,c,o,l,u;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.state,a=n.pageNum,r=n.search,s=n.productType,i=3,e.pageNum=a,!r){t.next=10;break}return e.pageNum=1,t.next=7,F(e.pageNum,i,r,s);case 7:c=t.sent,t.next=13;break;case 10:return t.next=12,T(a,i);case 12:c=t.sent;case 13:0===c.status&&(o=c.data,l=o.list,u=o.total,l.forEach((function(e,t){e.key=t})),e.setState({total:u,productList:l})),console.log(c);case 15:case"end":return t.stop()}}),t)}))),e.updataStatus=function(){var t=Object(g.a)(O.a.mark((function t(n,a){var r;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=1===n?0:1,t.next=3,R(a,r);case 3:0===t.sent.status&&e.getProductList();case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e.handleChange=function(t){e.setState({pageNum:t.current},(function(){e.getProductList()}))},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.getProductList(),this.columns=[{classNmae:"product_list",title:"\u5546\u54c1\u540d\u79f0",width:"200px",dataIndex:"name",render:function(e){return Object(a.jsx)("span",{style:{fontSize:16},children:e})}},{title:"\u5546\u54c1\u63cf\u8ff0",dataIndex:"desc"},{title:"\u4ef7\u683c",width:"100px",dataIndex:"price",render:function(e){return Object(a.jsxs)("span",{children:["\uffe5",e]})}},{title:"\u72b6\u6001",width:"50px",render:function(t){var n=t._id,r=t.status;return 1===t.status?Object(a.jsxs)("span",{children:[Object(a.jsx)(j.a,{type:"primary",onClick:function(){return e.updataStatus(r,n)},children:"\u4e0b\u67b6"}),Object(a.jsx)("span",{children:"\u5728\u552e"})]}):Object(a.jsxs)("span",{children:[Object(a.jsx)(j.a,{type:"primary",onClick:function(){return e.updataStatus(r,n)},children:"\u4e0a\u67b6"}),Object(a.jsx)("span",{children:"\u5df2\u4e0b\u67b6"})]})}},{title:"\u64cd\u4f5c",width:"200px",render:function(t){return Object(a.jsxs)("span",{children:[Object(a.jsx)(oe,{onClick:function(){return e.props.history.push("/product/info",t)},children:"\u8be6\u60c5"}),Object(a.jsx)(oe,{onClick:function(){return e.props.history.push("/product/updateadd",t)},children:"\u4fee\u6539"})]})}}]}},{key:"render",value:function(){var e=this;this.dataSource=this.state.productList;var t=Object(a.jsxs)("span",{style:{display:"flex",alignItem:"center"},children:[Object(a.jsxs)(Se.a,{value:this.state.productType,style:{width:150},onChange:function(t){e.setState({productType:t})},children:[Object(a.jsx)(Ne,{value:"productName",children:"\u6309\u540d\u79f0\u641c\u7d22"}),Object(a.jsx)(Ne,{value:"productDesc",children:"\u6309\u63cf\u8ff0\u641c\u7d22"})]}),Object(a.jsx)(f.a,{style:{width:200,margin:"0 20px"},value:this.state.search,onChange:function(t){e.setState({search:t.target.value})}}),Object(a.jsx)(j.a,{type:"primary",onClick:this.getProductList,children:"\u641c\u7d22"})]});return Object(a.jsx)(ke.a,{title:t,extra:Object(a.jsx)(oe,{onClick:function(){return e.props.history.push("/product/updateadd")},children:"+ \u6dfb\u52a0\u5546\u54c1"}),children:Object(a.jsx)(we.a,{bordered:!0,dataSource:this.dataSource,columns:this.columns,pagination:{pageSize:3,total:this.state.total,current:this.pageNum},onChange:this.handleChange})})}}]),n}(r.Component),_e=(n(929),n(705)),Te=n(307),Fe=n(1379),Re=(n(1360),n(703)),Pe=n(1378),Ee=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var a;Object(o.a)(this,n),(a=t.call(this,e)).handleChange=function(e){var t=e.file,n=e.fileList;if(console.log(t,n),"done"===t.status){var r=t.uid,s=t.status,i=n[n.length-1].response.data,c=i.url,o=i.name,l=a.state.fileList;l.push({uid:r,name:o,status:s,url:c}),a.setState({fileList:l})}else"error"===t.status&&x.b.error("\u56fe\u7247\u4e0a\u4f20\u5931\u8d25")},a.handlePreview=function(e){var t=e.name,n=e.url;a.setState({previewVisible:!0,previewImage:n,previewTitle:t})},a.handleRemove=function(){var e=Object(g.a)(O.a.mark((function e(t){var n,r,s,i;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.uid,r=a.state.fileList,s=r.filter((function(e){return e.uid!==n})),e.next=5,C("/manage/img/delete",{name:t.name},"POST");case 5:i=e.sent,console.log(i),0===i.status?x.b.success("\u5220\u9664\u6210\u529f"):x.b.error(i.msg),a.setState({fileList:s});case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.handleCancel=function(){return a.setState({previewVisible:!1})},a.getStateList=function(){var e=[];return a.state.fileList.forEach((function(t){e.push(t.name)})),e};var r=a.props.imgs,s=[];return console.log("prctures()",r),r&&r.forEach((function(e,t){s.push({uid:-t,name:e,status:"done",url:"http://localhost:5000/upload/"+e})})),console.log(s),a.state={previewVisible:!1,previewImage:"",previewTitle:"",fileList:s},a}return Object(l.a)(n,[{key:"render",value:function(){var e=this.state,t=e.previewVisible,n=e.previewImage,r=e.fileList,s=e.previewTitle,i=Object(a.jsxs)("div",{children:[Object(a.jsx)(Pe.a,{}),Object(a.jsx)("div",{style:{marginTop:8},children:"Upload"})]});return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(Re.a,{action:"/manage/img/upload",name:"image",listType:"picture-card",fileList:r,onRemove:this.handleRemove,onPreview:this.handlePreview,onChange:this.handleChange,children:r.length>=4?null:i}),Object(a.jsx)(W.a,{visible:t,title:s,footer:null,onCancel:this.handleCancel,children:Object(a.jsx)("img",{alt:"example",style:{width:"100%"},src:n})})]})}}]),n}(r.Component),De=(n(943),n(228)),Ve=n(692),Me=n(693),Ue=n.n(Me),qe=n(694),He=n.n(qe),ze=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var a;Object(o.a)(this,n),(a=t.call(this,e)).onEditorStateChange=function(e){a.setState({editorState:e})},a.getEditor=function(){return Ue()(Object(De.convertToRaw)(a.state.editorState.getCurrentContent()))},a.uploadImageCallBack=function(e){return new Promise((function(t,n){var a=new XMLHttpRequest;a.open("POST","/manage/img/upload");var r=new FormData;r.append("image",e),a.send(r),a.addEventListener("load",(function(){var e=JSON.parse(a.responseText).data.url;t({data:{link:e}})})),a.addEventListener("error",(function(){var e=JSON.parse(a.responseText);x.b.eroor("\u4e0a\u4f20\u5931\u8d25"),n(e)}))}))};var r=a.props.detail,s=He()(r);if(s){var i=De.ContentState.createFromBlockArray(s.contentBlocks),c=De.EditorState.createWithContent(i);a.state={editorState:c}}else a.state={editorState:De.EditorState.createEmpty()};return a}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsx)("div",{children:Object(a.jsx)(Ve.Editor,{editorState:this.state.editorState,wrapperClassName:"demo-wrapper",editorClassName:"demo-editor",onEditorStateChange:this.onEditorStateChange,toolbar:{image:{urlEnabled:!0,uploadEnabled:!0,alignmentEnabled:!0,uploadCallback:this.uploadImageCallBack,previewImage:!0,inputAccept:"image/*",alt:{present:!0,mandatory:!1,previewImage:!0}}}})})}}]),n}(r.Component),Ke=b.a.Item,Be=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).getOptionList=Object(g.a)(O.a.mark((function e(){var t,n,r=arguments;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:"0",e.next=3,N(t);case 3:if(0!==(n=e.sent).status){e.next=12;break}if("0"!==t){e.next=10;break}console.log(n),a.initOptionList(n.data,t),e.next=12;break;case 10:if("0"===t){e.next=12;break}return e.abrupt("return",a.initOptionList(n.data,t));case 12:case"end":return e.stop()}}),e)}))),a.initOptionList=function(){var e=Object(g.a)(O.a.mark((function e(t,n){var r,s,i,c,o,l;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=[],s="0"!==n,t.forEach((function(e){r.push({value:e._id,label:e.name,isLeaf:s,parentId:e.parentId})})),"0"!==n){e.next=17;break}if("0"===(i=a.product.pCategoryId)){e.next=14;break}return e.next=8,N(i);case 8:return c=e.sent,o=c.data,e.next=12,a.initOptionList(o,i);case 12:l=e.sent,r.forEach((function(e){e.value===i&&(e.children=l)}));case 14:a.setState({optionList:r}),e.next=18;break;case 17:return e.abrupt("return",r);case 18:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),a.loadData=function(){var e=Object(g.a)(O.a.mark((function e(t){var n,r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t[t.length-1],console.log(t[t.length-1]),n.loading=!0,e.next=5,a.getOptionList(n.value);case 5:r=e.sent,n.loading=!1,r&&r.length>0?n.children=r:n.isLeaf=!0,a.setState({optionList:Object(Te.a)(a.state.optionList)});case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.onFinish=function(){var e=Object(g.a)(O.a.mark((function e(t){var n,r,s,i,c,o,l,u,d,h;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,r=t.desc,s=t.price,t.categoryId[1]?(i=t.categoryId[1],c=t.categoryId[0]):(i=t.categoryId[0],c="0"),o=a.pw.current.getStateList(),l=a.editor.current.getEditor(),!a.props.location.state._id){e.next=12;break}return h=a.props.location.state._id,u={_id:h,categoryId:i,pCategoryId:c,name:n,desc:r,price:s+"",imgs:o,detail:l},e.next=9,E(u,"update");case 9:d=e.sent,e.next=16;break;case 12:return u={categoryId:i,pCategoryId:c,name:n,desc:r,price:s+"",imgs:o,detail:l},e.next=15,E(u,"add");case 15:d=e.sent;case 16:console.log(d),0===d.status?(x.b.success(a.product?"\u66f4\u65b0\u6210\u529f":"\u6dfb\u52a0\u6210\u529f"),a.props.history.replace("/product")):x.b.success(a.product?"\u66f4\u65b0\u5931\u8d25":"\u6dfb\u52a0\u5931\u8d25"),console.log(u);case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.pw=s.a.createRef(),a.editor=s.a.createRef(),a.state={optionList:[]},a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.location.state||{},t=e.categoryId,n=e.pCategoryId;this.product={categoryId:t,pCategoryId:n},this.getOptionList()}},{key:"render",value:function(){var e=this,t=this.state.optionList,n=this.props.location.state||{},r=[];n.categoryId&&(r="0"===n.pCategoryId?[n.categoryId]:[n.pCategoryId,n.categoryId]);var s=Object(a.jsxs)("span",{children:[Object(a.jsx)(Fe.a,{style:{fontSize:20,margin:"0 15px",color:"#1DA57A"},onClick:function(){return e.props.history.goBack()}}),n.categoryId?"\u5546\u54c1\u4fee\u6539":"\u6dfb\u52a0\u5546\u54c1"]});return Object(a.jsx)(ke.a,{title:s,children:Object(a.jsxs)(b.a,{onFinish:this.onFinish,children:[Object(a.jsx)(Ke,{label:"\u5546\u54c1\u540d\u79f0",name:"name",initialValue:n.name,rules:[{required:!0,message:"\u5546\u54c1\u540d\u79f0\u4e0d\u80fd\u4e3a\u7a7a"}],children:Object(a.jsx)(f.a,{placeholder:"\u8bf7\u8f93\u5165\u5546\u54c1\u540d\u79f0",style:{width:"40%"}})}),Object(a.jsx)(Ke,{label:"\u5546\u54c1\u63cf\u8ff0",name:"desc",initialValue:n.desc,rules:[{required:!0,message:"\u5546\u54c1\u63cf\u8ff0\u4e0d\u80fd\u4e3a\u7a7a"}],children:Object(a.jsx)(f.a.TextArea,{placeholder:"\u8bf7\u8f93\u5165\u5546\u54c1\u63cf\u8ff0",style:{width:"40%"}})}),Object(a.jsx)(Ke,{label:"\u5546\u54c1\u4ef7\u683c",name:"price",initialValue:n.price,rules:[{required:!0,message:"\u5546\u54c1\u4ef7\u683c\u4e0d\u80fd\u4e3a\u7a7a"}],children:Object(a.jsx)(f.a,{type:"number",addonAfter:"\u5143",placeholder:"\u8bf7\u8f93\u5165\u5546\u54c1\u4ef7\u683c",style:{width:"40%"}})}),Object(a.jsx)(Ke,{label:"\u5546\u54c1\u5206\u7c7b",name:"categoryId",initialValue:n?r:[],rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u5546\u54c1\u5206\u7c7b"}],children:Object(a.jsx)(_e.a,{options:t,loadData:this.loadData,placeholder:"\u8bf7\u9009\u5546\u54c1\u5206\u7c7b",style:{width:"40%"}})}),Object(a.jsx)(Ke,{label:"\u5546\u54c1\u56fe\u7247",children:Object(a.jsx)(Ee,{imgs:n.imgs?n.imgs:[],ref:this.pw})}),Object(a.jsx)(Ke,{label:"\u5546\u54c1\u8be6\u7ec6",children:Object(a.jsx)(ze,{detail:n.detail?n.detail:"",ref:this.editor})}),Object(a.jsx)(j.a,{type:"primary",htmlType:"submit",children:"\u63d0\u4ea4"})]})})}}]),n}(r.Component),Je=(n(1040),n(455)),Ge=Je.b.Item,We=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).getCategoryInfo=Object(g.a)(O.a.mark((function e(){var t,n,r,s;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.props.location.state,n=t.categoryId,"0"!==(r=t.pCategoryId)){e.next=8;break}return e.next=4,P(n);case 4:0===(s=e.sent).status&&a.setState({category:s.data.name}),e.next=12;break;case 8:return e.next=10,Promise.all([P(n),P(r)]);case 10:0===(s=e.sent)[0].status&&0===s[1].status&&a.setState({category:s[0].data.name,pCategory:s[1].data.name});case 12:case"end":return e.stop()}}),e)}))),a.state={category:"",pCategory:""},a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.getCategoryInfo()}},{key:"render",value:function(){var e=this;console.log(this.props.location.state);var t=this.props.location.state,n=t.name,r=t.desc,s=t.price,i=t.imgs,c=t.detail,o=t.pCategoryId,l=this.state,u=l.category,d=l.pCategory,h=Object(a.jsxs)("span",{children:[Object(a.jsx)(Fe.a,{style:{fontSize:20,margin:"0 15px",color:"#1DA57A"},onClick:function(){return e.props.history.goBack()}}),"\u5546\u54c1\u8be6\u7ec6"]});return Object(a.jsx)(ke.a,{title:h,className:"product-info",children:Object(a.jsxs)(Je.b,{children:[Object(a.jsxs)(Ge,{className:"product-item",children:[Object(a.jsx)("span",{className:"left",children:"\u5546\u54c1\u540d\u79f0\uff1a"}),Object(a.jsx)("span",{children:n})]}),Object(a.jsxs)(Ge,{className:"product-item",children:[Object(a.jsx)("span",{className:"left",children:"\u5546\u54c1\u63cf\u8ff0\uff1a"}),Object(a.jsx)("span",{children:r})]}),Object(a.jsxs)(Ge,{className:"product-item",children:[Object(a.jsx)("span",{className:"left",children:"\u5546\u54c1\u4ef7\u683c\uff1a"}),Object(a.jsxs)("span",{children:["\uffe5",s]})]}),Object(a.jsxs)(Ge,{className:"product-item",children:[Object(a.jsx)("span",{className:"left",children:"\u5546\u54c1\u5206\u7c7b\uff1a"}),Object(a.jsx)("span",{children:("0"===o?"":d+" > ")+u})]}),Object(a.jsxs)(Ge,{className:"product-item",children:[Object(a.jsx)("span",{className:"left",children:"\u5546\u54c1\u56fe\u7247\uff1a"}),Object(a.jsx)("span",{children:i.map((function(e,t){return Object(a.jsx)("img",{style:{width:150,height:150,border:"1px solid #1DA57A"},src:"http://localhost:5000/upload/"+e,alt:"img"},t)}))})]}),Object(a.jsxs)(Ge,{className:"product-item",children:[Object(a.jsx)("span",{className:"left",children:"\u5546\u54c1\u8be6\u60c5\uff1a"}),Object(a.jsx)("span",{dangerouslySetInnerHTML:{__html:c}})]})]})})}}]),n}(r.Component),Xe=(n(1042),function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsxs)(p.d,{children:[Object(a.jsx)(p.b,{path:"/product",component:Ae,exact:!0}),Object(a.jsx)(p.b,{path:"/product/info",component:We}),Object(a.jsx)(p.b,{path:"/product/updateadd",component:Be}),Object(a.jsx)(p.a,{to:"/product"})]})}}]),n}(r.Component)),Ze=(n(1043),n(704)),$e=b.a.Item,Qe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).formRef=s.a.createRef(),a.initTreeList=function(e){var t=[],n=e.reduce((function(e,t){var n={};return n.title=t.title,n.key=t.key,t.children&&(n.children=t.children.map((function(e){return{title:e.title,key:e.key}})),a.initTreeList(t.children)),e.push(n),e}),[]);t.push({title:"\u6743\u9650\u8bbe\u7f6e",key:"/"}),t[0].children=n,a.TreeList=t},a.initTabColumns=function(){a.columns=[{title:"\u89d2\u8272\u540d\u79f0",dataIndex:"name"},{title:"\u521b\u5efa\u65f6\u95f4",dataIndex:"create_time",render:function(e){return ie(e)}},{title:"\u6388\u6743\u65f6\u95f4",dataIndex:"auth_time",render:function(e){return ie(e)}},{title:"\u6388\u6743\u4eba",dataIndex:"auth_name"}]},a.getUserList=Object(g.a)(O.a.mark((function e(){var t,n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C("/manage/role/list");case 2:t=e.sent,(n=t.data).forEach((function(e){e.key=e._id})),0===t.status?a.setState({userList:n}):x.b.error("\u7528\u6237\u5217\u8868\u83b7\u53d6\u5931\u8d25");case 6:case"end":return e.stop()}}),e)}))),a.handleOk=function(){a.formRef.current.submit()},a.handleCancel=function(){a.formRef.current.resetFields(),a.setState((function(e){return e.isShowAdd=!1}))},a.roleAdd=function(){var e=Object(g.a)(O.a.mark((function e(t){var n,r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D(t);case 2:0===(n=e.sent).status&&((r=n.data).key=r._id,a.setState((function(e){return e.userList=[].concat(Object(Te.a)(e.userList),[r]),e.isShowAdd=!1})));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.handleChange=function(e,t){a.setState({selectKey:e[0],role:t[0]})},a.handleSetOk=Object(g.a)(O.a.mark((function e(){var t,n,r,s,i,c,o,l,u;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.state,n=t.role,r=t.userList,s=n._id,i=n.menus,c=Date.now(),o=z().username,e.next=6,C("/manage/role/update",{_id:s,menus:i,auth_time:c,auth_name:o},"POST");case 6:0===(l=e.sent).status?(console.log(n._id,z().role_id),n._id===z().role_id&&(K(),x.b.info("\u4fee\u6539\u6743\u9650\uff0c\u8bf7\u91cd\u65b0\u767b\u5f55")),u=r.findIndex((function(e){return e.name===l.data.name})),r[u]=l.data,r.forEach((function(e){e.key=e._id})),a.setState({isShowSet:!1,role:{},selectKey:"",userList:Object(Te.a)(r)})):x.b.error("\u66f4\u65b0\u5931\u8d25");case 8:case"end":return e.stop()}}),e)}))),a.handleSetCancel=function(){a.setState({isShowSet:!1,role:{},selectKey:""})},a.handCheck=function(e){a.setState({role:Object(ce.a)(Object(ce.a)({},a.state.role),{},{menus:e})})},a.initTabColumns(),a.initTreeList(se),a.state={userList:[],isShowAdd:!1,isShowSet:!1,role:{},selectKey:""},a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.getUserList()}},{key:"render",value:function(){var e=this,t=this.state,n=t.userList,r=t.isShowAdd,s=t.selectKey,i=t.role,c=t.isShowSet,o=Object(a.jsxs)("span",{children:[Object(a.jsx)(j.a,{type:"primary",style:{margin:"0 20px"},onClick:function(){return e.setState({isShowAdd:!0})},children:"\u521b\u5efa\u89d2\u8272"}),Object(a.jsx)(j.a,{type:"primary",disabled:!s,onClick:function(){return e.setState({isShowSet:!0})},children:"\u8bbe\u7f6e\u89d2\u8272\u6743\u9650"})]});return Object(a.jsxs)(ke.a,{title:o,children:[Object(a.jsx)(we.a,{dataSource:n,columns:this.columns,pagination:{pageSize:3},rowSelection:{type:"radio",onChange:this.handleChange,selectedRowKeys:[s]},onRow:function(t){return{onClick:function(n){e.setState({selectKey:t.key,role:t})}}}}),Object(a.jsx)(W.a,{title:"\u521b\u5efa\u89d2\u8272",visible:r,onOk:this.handleOk,onCancel:this.handleCancel,children:Object(a.jsx)(b.a,{ref:this.formRef,onFinish:this.roleAdd,children:Object(a.jsx)($e,{label:"\u89d2\u8272\u540d\u79f0",name:"roleName",rules:[{required:!0,message:"\u89d2\u8272\u540d\u79f0\u4e0d\u80fd\u4e3a\u7a7a"}],children:Object(a.jsx)(f.a,{})})})}),Object(a.jsxs)(W.a,{title:"\u8bbe\u7f6e\u89d2\u8272\u6743\u9650",visible:c,onOk:this.handleSetOk,onCancel:this.handleSetCancel,children:[Object(a.jsx)($e,{label:"\u89d2\u8272\u540d\u79f0",children:Object(a.jsx)(f.a,{value:i.name,disabled:!0})}),Object(a.jsx)(Ze.a,{checkable:!0,checkedKeys:i.menus||[],defaultExpandAll:!0,onCheck:this.handCheck,treeData:this.TreeList})]})]})}}]),n}(r.Component),Ye=b.a.Item,et=Se.a.Option,tt=W.a.confirm,nt=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var r;return Object(o.a)(this,n),(r=t.call(this,e)).initColumns=function(){r.columns=[{title:"\u7528\u6237\u540d",dataIndex:"username"},{title:"\u90ae\u7bb1",dataIndex:"email"},{title:"\u7535\u8bdd",dataIndex:"phone"},{title:"\u6ce8\u518c\u65f6\u95f4",dataIndex:"create_time",render:function(e){return ie(e)}},{title:"\u6240\u5c5e\u89d2\u8272",dataIndex:"role_id",render:function(e){return r.state.userList.find((function(t){return t._id===e})).name}},{title:"\u64cd\u4f5c",render:function(e){return Object(a.jsxs)("span",{children:[Object(a.jsx)(oe,{onClick:function(){return r.userUpdata(e)},children:"\u4fee\u6539"}),Object(a.jsx)(oe,{onClick:function(){return r.userDelete(e)},children:"\u5220\u9664"})]})}}]},r.getRoleList=Object(g.a)(O.a.mark((function e(){var t,n,a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C("/manage/user/list");case 2:0===(t=e.sent).status?(n=t.data.users,a=t.data.roles,n.forEach((function(e){e.key=e._id})),r.setState({roleList:n,userList:a})):x.b.error("\u83b7\u53d6\u7528\u6237\u5217\u8868\u5931\u8d25");case 4:case"end":return e.stop()}}),e)}))),r.handleAddOk=function(){r.AddformRef.current.submit()},r.handleAddCancel=function(){r.AddformRef.current.resetFields(),r.user={},r.setState({isUserVisible:!1})},r.userUpdata=function(e){r.user=e,r.setState({isUserVisible:!0},(function(){r.AddformRef.current.setFieldsValue(r.user)}))},r.onFinishAdd=function(){var e=Object(g.a)(O.a.mark((function e(t){var n,a,s;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t,!(s={_id:r.user._id,username:t.username,phone:t.phone,email:t.email,role_id:t.role_id})._id){e.next=8;break}return e.next=5,V(s);case 5:n=e.sent,e.next=11;break;case 8:return e.next=10,V(a);case 10:n=e.sent;case 11:0===n.status?(r.setState({isUserVisible:!1}),r.getRoleList()):x.b.error(s._id?"\u66f4\u65b0\u5931\u8d25":"\u6dfb\u52a0\u5931\u8d25");case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.userAddorUpdata=function(){r.setState({isUserVisible:!0})},r.userDelete=function(e){tt({title:"\u8b66\u544a\uff01",icon:Object(a.jsx)(X.a,{}),content:"\u4f60\u786e\u5b9a\u8981\u5220\u9664\u8be5\u7528\u6237\u5417?",onOk:function(){var t=Object(g.a)(O.a.mark((function t(){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,C("/manage/user/delete",{userId:e._id},"POST");case 2:0===t.sent.status?r.getRoleList():x.b.error("\u5220\u9664\u5931\u8d25");case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()})},r.AddformRef=s.a.createRef(),r.initColumns(),r.state={roleList:[],userList:[],isUserVisible:!1},r}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.getRoleList()}},{key:"render",value:function(){var e=this.state,t=e.roleList,n=e.isUserVisible,r=e.userList,s=this.user||{},i=Object(a.jsx)("span",{style:{marginLeft:50},children:Object(a.jsx)(j.a,{type:"primary",onClick:this.userAddorUpdata,children:"\u521b\u5efa\u7528\u6237"})});return Object(a.jsxs)(ke.a,{title:i,children:[Object(a.jsx)(we.a,{dataSource:t,columns:this.columns,pagination:{pageSize:3}}),Object(a.jsx)(W.a,{title:"\u6dfb\u52a0\u7528\u6237",visible:n,onOk:this.handleAddOk,onCancel:this.handleAddCancel,children:Object(a.jsxs)(b.a,Object(ce.a)(Object(ce.a)({},{labelCol:{span:4},wrapperCol:{span:16}}),{},{ref:this.AddformRef,onFinish:this.onFinishAdd,children:[Object(a.jsx)(Ye,{label:"\u7528\u6237\u540d",name:"username",rules:[{required:!0,message:"\u7528\u6237\u540d\u4e0d\u80fd\u4e3a\u7a7a"}],children:Object(a.jsx)(f.a,{placeholder:"\u8bf7\u8f93\u5165\u7528\u6237\u540d"})}),s._id?null:Object(a.jsx)(Ye,{label:"\u5bc6\u7801",name:"password",rules:[{required:!0,message:"\u5bc6\u7801\u4e0d\u80fd\u4e3a\u7a7a"},{max:12,min:6,message:"\u5bc6\u7801\u957f\u5ea6\u4e3a6-12\u4f4d"}],children:Object(a.jsx)(f.a,{placeholder:"\u8bf7\u8f93\u5165\u5bc6\u7801"})}),Object(a.jsx)(Ye,{label:"\u624b\u673a\u53f7",name:"phone",rules:[{required:!0,message:"\u624b\u673a\u53f7\u4e0d\u80fd\u4e3a\u7a7a"}],children:Object(a.jsx)(f.a,{placeholder:"\u8bf7\u8f93\u5165\u624b\u673a\u53f7"})}),Object(a.jsx)(Ye,{label:"\u90ae\u7bb1",name:"email",rules:[{required:!0,message:"\u90ae\u7bb1\u4e0d\u80fd\u4e3a\u7a7a"}],children:Object(a.jsx)(f.a,{placeholder:"\u8bf7\u8f93\u5165\u90ae\u7bb1"})}),Object(a.jsx)(Ye,{label:"\u89d2\u8272",name:"role_id",rules:[{required:!0,message:"\u90ae\u7bb1\u4e0d\u80fd\u4e3a\u7a7a"}],children:Object(a.jsx)(Se.a,{placeholder:"\u8bf7\u9009\u62e9\u89d2\u8272",children:r.map((function(e){return Object(a.jsx)(et,{value:e._id,children:e.name},e._id)}))})})]}))})]})}}]),n}(r.Component),at=n(266),rt=n.n(at),st=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).getOption=function(){return{title:{text:"ECharts \u5165\u95e8\u793a\u4f8b"},tooltip:{},legend:{data:["\u9500\u91cf"]},xAxis:{data:["\u886c\u886b","\u7f8a\u6bdb\u886b","\u96ea\u7eba\u886b","\u88e4\u5b50","\u9ad8\u8ddf\u978b","\u889c\u5b50"]},yAxis:{},series:[{name:"\u9500\u91cf",type:"bar",data:[5,20,36,10,10,20]},{name:"\u9500\u91cf",type:"bar",color:"#ccc",data:[6,25,30,20,30,15]}]}},e}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsx)(ke.a,{children:Object(a.jsx)(rt.a,{option:this.getOption(),style:{width:800,margin:"100px auto"}})})}}]),n}(r.Component),it=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).getOption=function(){return{title:{text:"\u67d0\u7ad9\u70b9\u7528\u6237\u8bbf\u95ee\u6765\u6e90",subtext:"\u7eaf\u5c5e\u865a\u6784",left:"center"},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{orient:"vertical",left:"left",data:["\u76f4\u63a5\u8bbf\u95ee","\u90ae\u4ef6\u8425\u9500","\u8054\u76df\u5e7f\u544a","\u89c6\u9891\u5e7f\u544a","\u641c\u7d22\u5f15\u64ce"]},series:[{name:"\u8bbf\u95ee\u6765\u6e90",type:"pie",radius:"55%",center:["50%","60%"],data:[{value:335,name:"\u76f4\u63a5\u8bbf\u95ee"},{value:310,name:"\u90ae\u4ef6\u8425\u9500"},{value:234,name:"\u8054\u76df\u5e7f\u544a"},{value:135,name:"\u89c6\u9891\u5e7f\u544a"},{value:1548,name:"\u641c\u7d22\u5f15\u64ce"}],emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]}},e}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsx)(ke.a,{children:Object(a.jsx)(rt.a,{option:this.getOption(),style:{width:800,margin:"100px auto"}})})}}]),n}(r.Component),ct=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).getOption=function(){return{title:{text:"\u6298\u7ebf\u56fe\u5806\u53e0"},tooltip:{trigger:"axis"},legend:{data:["\u90ae\u4ef6\u8425\u9500","\u8054\u76df\u5e7f\u544a","\u89c6\u9891\u5e7f\u544a","\u76f4\u63a5\u8bbf\u95ee","\u641c\u7d22\u5f15\u64ce"]},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},toolbox:{feature:{saveAsImage:{}}},xAxis:{type:"category",boundaryGap:!1,data:["\u5468\u4e00","\u5468\u4e8c","\u5468\u4e09","\u5468\u56db","\u5468\u4e94","\u5468\u516d","\u5468\u65e5"]},yAxis:{type:"value"},series:[{name:"\u90ae\u4ef6\u8425\u9500",type:"line",stack:"\u603b\u91cf",data:[120,132,101,134,90,230,210]},{name:"\u8054\u76df\u5e7f\u544a",type:"line",stack:"\u603b\u91cf",data:[220,182,191,234,290,330,310]},{name:"\u89c6\u9891\u5e7f\u544a",type:"line",stack:"\u603b\u91cf",data:[150,232,201,154,190,330,410]},{name:"\u76f4\u63a5\u8bbf\u95ee",type:"line",stack:"\u603b\u91cf",data:[320,332,301,334,390,330,320]},{name:"\u641c\u7d22\u5f15\u64ce",type:"line",stack:"\u603b\u91cf",data:[820,932,901,934,1290,1330,1320]}]}},e}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsx)(ke.a,{children:Object(a.jsx)(rt.a,{option:this.getOption(),style:{width:800,margin:"100px auto"}})})}}]),n}(r.Component),ot=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsx)("div",{children:"Oders"})}}]),n}(r.Component),lt=(n(1357),G.a.Footer),ut=G.a.Sider,dt=G.a.Content,ht=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=z();return e&&e._id?Object(a.jsxs)(G.a,{style:{minHeight:"100%"},children:[",",Object(a.jsx)(ut,{className:"home-sider",children:Object(a.jsx)(be,{})}),Object(a.jsxs)(G.a,{children:[Object(a.jsx)(de,{children:"Header"}),Object(a.jsx)(dt,{className:"home-content",children:Object(a.jsxs)(p.d,{children:[Object(a.jsx)(p.b,{path:"/home",component:ve}),Object(a.jsx)(p.b,{path:"/category",component:Le}),Object(a.jsx)(p.b,{path:"/product",component:Xe}),Object(a.jsx)(p.b,{path:"/role",component:Qe}),Object(a.jsx)(p.b,{path:"/user",component:nt}),Object(a.jsx)(p.b,{path:"/charts/bar",component:st}),Object(a.jsx)(p.b,{path:"/charts/pie",component:it}),Object(a.jsx)(p.b,{path:"/charts/line",component:ct}),Object(a.jsx)(p.b,{path:"/order",component:ot}),Object(a.jsx)(p.a,{to:"/home"})]})}),Object(a.jsx)(lt,{className:"home-footer",children:"\u63a8\u8350\u4f7f\u7528Google\u6d4f\u89c8\u5668,\u53ef\u4ee5\u83b7\u5f97\u66f4\u52a0\u7684\u9875\u9762\u64cd\u4f5c\u4f53\u9a8c"})]})]}):Object(a.jsx)(p.a,{to:"/login"})}}]),n}(r.Component),pt=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsx)(h.a,{children:Object(a.jsxs)(p.d,{children:[Object(a.jsx)(p.b,{path:"/login",component:J}),Object(a.jsx)(p.b,{path:"/",component:ht})]})})}}]),n}(r.Component);c.a.render(Object(a.jsx)(pt,{}),document.getElementById("root"))},719:function(e,t,n){},772:function(e,t,n){},856:function(e,t,n){},857:function(e,t,n){},870:function(e,t,n){},889:function(e,t,n){}},[[1358,1,2]]]);
//# sourceMappingURL=main.9eb0edd2.chunk.js.map